import{r as t,c as s,h as i,H as e,g as h}from"./p-93b809e8.js";import{g as a}from"./p-1c737f0a.js";const n={itemsPerPage:"Items per page",of:"of",items:"items",pages:"pages"},o={itemsPerPage:"Itens por p치gina",of:"de",items:"itens",pages:"p치ginas"},r={itemsPerPage:"Itens por p치gina",of:"de",items:"itens",pages:"p치ginas"},c=class{constructor(i){t(this,i),this.bdsPaginationChange=s(this,"bdsPaginationChange",7),this.bdsItemsPerPageChange=s(this,"bdsItemsPerPageChange",7),this.pageLoadSize=100,this.nextPage=t=>{if(this.value<this.pages){t.preventDefault();const s=this.value+1;s>this.loadedPageRange.end&&this.loadMorePages("next"),this.value=s,this.updateItemRange()}},this.previewPage=t=>{if(this.value>1){t.preventDefault();const s=this.value-1;s<this.loadedPageRange.start&&this.loadMorePages("prev"),this.value=s,this.updateItemRange()}},this.firstPage=t=>{this.value>1&&(t.preventDefault(),this.loadMorePages("first"),this.value=1,this.updateItemRange())},this.lastPage=t=>{this.value<this.pages&&(t.preventDefault(),this.loadMorePages("last"),this.value=this.pages,this.updateItemRange())},this.openOptions=()=>{this.openSelect=!this.openSelect},this.onBlur=()=>{this.openSelect=!1},this.handleSelectScroll=t=>{const s=t.target,{scrollTop:i,scrollHeight:e,clientHeight:h}=s;i+h>=e-10&&this.loadedPageRange.end<this.pages&&this.loadMorePagesForScroll("next"),i<=10&&this.loadedPageRange.start>1&&this.loadMorePagesForScroll("prev")},this.value=this.startedPage,this.itemValue=void 0,this.openSelect=void 0,this.paginationNumbers=[],this.loadedPageRange={start:1,end:100},this.itemsPerPage=void 0,this.intoView=null,this.pages=void 0,this.startedPage=void 0,this.optionsPosition="auto",this.pageCounter=!1,this.itemsPage=void 0,this.numberItems=void 0,this.language="pt_BR",this.dtButtonInitial=null,this.dtButtonPrev=null,this.dtSelectNumber=null,this.dtButtonNext=null,this.dtButtonEnd=null}componentWillLoad(){this.countPage(),this.intoView=a(this.el),this.processItemsPage(),this.pageCounter&&(this.itemValue=this.itemsPage[0]),this.itemSelected(this.itemValue),this.countItem()}componentDidRender(){this.attachScrollListener()}disconnectedCallback(){this.removeScrollListener()}attachScrollListener(){if(this.selectRef){const t=this.selectRef.shadowRoot?.querySelector(".select__options");t&&!t.hasAttribute("data-scroll-listener-attached")&&(t.addEventListener("scroll",this.handleSelectScroll),t.setAttribute("data-scroll-listener-attached","true"),this.setupDropdownObserver(t))}}setupDropdownObserver(t){this.dropdownObserver=new MutationObserver((t=>{t.forEach((t=>{"attributes"===t.type&&"class"===t.attributeName&&t.target.classList.contains("select__options--open")&&requestAnimationFrame((()=>{this.scrollToSelectedOption()}))}))})),this.dropdownObserver.observe(t,{attributes:!0,attributeFilter:["class"]})}scrollToSelectedOption(){if(this.selectRef&&this.value){const t=this.selectRef.shadowRoot?.querySelector(".select__options");if(t&&t.classList.contains("select__options--open")){const s=t.querySelector(`bds-select-option[value="${this.value}"]`);s&&s.scrollIntoView({behavior:"smooth",block:"center"})}}}removeScrollListener(){if(this.selectRef){const t=this.selectRef.shadowRoot?.querySelector(".select__options");t&&(t.removeEventListener("scroll",this.handleSelectScroll),t.removeAttribute("data-scroll-listener-attached"))}this.dropdownObserver&&(this.dropdownObserver.disconnect(),this.dropdownObserver=null)}pagesChanged(){this.countPage()}valueChanged(){this.bdsPaginationChange.emit(this.value)}processItemsPage(){if("string"==typeof this.itemsPage)try{this.itemsPage=JSON.parse(this.itemsPage.replace(/'/g,'"'))}catch(t){this.itemsPage=[]}}countItem(){this.pageCounter&&(this.pages=Math.ceil(this.numberItems/this.itemValue))}loadPageRange(t){if(!this.pages)return;const s=Math.floor(this.pageLoadSize/2);let i=Math.max(1,t-s),e=Math.min(this.pages,i+this.pageLoadSize-1);e-i<this.pageLoadSize-1&&(i=Math.max(1,e-this.pageLoadSize+1)),this.loadedPageRange={start:i,end:e},this.paginationNumbers=[];for(let h=i;h<=e;h++)this.paginationNumbers.push(h);requestAnimationFrame((()=>{this.attachScrollListener()}))}loadMorePages(t){if(!this.pages)return;let s=this.loadedPageRange.start,i=this.loadedPageRange.end;switch(t){case"next":i<this.pages&&(s=i+1,i=Math.min(this.pages,s+this.pageLoadSize-1));break;case"prev":s>1&&(i=s-1,s=Math.max(1,i-this.pageLoadSize+1));break;case"first":s=1,i=Math.min(this.pages,this.pageLoadSize);break;case"last":i=this.pages,s=Math.max(1,i-this.pageLoadSize+1)}this.loadedPageRange={start:s,end:i},this.paginationNumbers=[];for(let e=s;e<=i;e++)this.paginationNumbers.push(e);requestAnimationFrame((()=>{this.attachScrollListener()}))}countPage(){if(0!==this.paginationNumbers.length&&(this.paginationNumbers=[]),0===this.paginationNumbers.length){const t=Math.min(this.pageLoadSize,this.pages||0);this.loadedPageRange={start:1,end:t};for(let s=this.loadedPageRange.start;s<=this.loadedPageRange.end;s++)this.paginationNumbers.push(s);this.startedPage&&this.startedPage<this.pages?(this.value=this.startedPage,this.startedPage>this.loadedPageRange.end&&this.loadPageRange(this.startedPage)):this.value=this.paginationNumbers[0]}}optionSelected(t){(t<this.loadedPageRange.start||t>this.loadedPageRange.end)&&this.loadPageRange(t),this.value=t,this.openOptions(),this.updateItemRange()}loadMorePagesForScroll(t){if(!this.pages)return;let s=this.loadedPageRange.start,i=this.loadedPageRange.end;if("next"===t&&i<this.pages){i=Math.min(this.pages,i+50),this.loadedPageRange={start:s,end:i};for(let t=this.loadedPageRange.end-50+1;t<=i;t++)t>0&&!this.paginationNumbers.includes(t)&&this.paginationNumbers.push(t)}else if("prev"===t&&s>1){s=Math.max(1,s-50),this.loadedPageRange={start:s,end:i};const t=[];for(let i=s;i<this.loadedPageRange.start+50;i++)i>0&&!this.paginationNumbers.includes(i)&&t.push(i);this.paginationNumbers=[...t,...this.paginationNumbers]}this.paginationNumbers=[...this.paginationNumbers]}itemSelected(t){this.itemValue=t,this.itemsPerPage=t,this.openOptions(),this.countItem(),this.updateItemRange(),this.bdsItemsPerPageChange.emit(this.itemsPerPage)}updateItemRange(){this.startItem=(this.value-1)*this.itemsPerPage+1,this.endItem=Math.min(this.value*this.itemsPerPage,this.numberItems)}get currentLanguage(){switch(this.language){case"en_US":return n;case"es_MX":return r;default:return o}}render(){const{currentLanguage:t}=this;return i(e,{class:{full_width:this.pageCounter}},i("bds-grid",{"justify-content":"space-between"},this.itemsPerPage&&this.itemsPage&&i("bds-grid",{gap:"1","align-items":"center",class:"items_per_page"},i("bds-typo",{variant:"fs-14"},t.itemsPerPage,":"),i("bds-select",{class:"actions_select",value:this.itemValue,"options-position":this.optionsPosition},this.itemsPage?.map(((t,s)=>i("bds-select-option",{key:s,value:t,onClick:()=>this.itemSelected(t)},t)))),i("bds-typo",{variant:"fs-14","no-wrap":"true"},this.startItem,"-",this.endItem," ",t.of," ",this.numberItems)),i("bds-grid",{gap:"1","align-items":"center",class:"actions"},i("bds-button-icon",{onBdsClick:t=>this.firstPage(t),size:"short",variant:"secondary",icon:"arrow-first",dataTest:this.dtButtonInitial}),i("bds-button-icon",{onBdsClick:t=>this.previewPage(t),size:"short",variant:"secondary",icon:"arrow-left",dataTest:this.dtButtonPrev}),i("bds-select",{ref:t=>this.selectRef=t,class:"actions_select",value:this.value,"options-position":this.optionsPosition},this.paginationNumbers.map(((t,s)=>i("bds-select-option",{key:s,value:t,onClick:()=>this.optionSelected(t)},t)))),this.pageCounter&&i("bds-typo",{class:"actions--text",variant:"fs-14","no-wrap":"true"},t.of," ",this.pages," ",t.pages),i("bds-button-icon",{onBdsClick:t=>this.nextPage(t),size:"short",variant:"secondary",icon:"arrow-right",dataTest:this.dtButtonNext}),i("bds-button-icon",{onBdsClick:t=>this.lastPage(t),size:"short",variant:"secondary",icon:"arrow-last",dataTest:this.dtButtonEnd}))))}get el(){return h(this)}static get watchers(){return{pages:["pagesChanged"],startedPage:["pagesChanged"],value:["valueChanged"],itemValue:["itemSelected"]}}};c.style=":host{display:block}:host .actions_select{width:74px}:host(.full_width){width:100%}@media screen and (max-width: 905px){.items_per_page{display:none}.actions{width:100%;-ms-flex-pack:center;justify-content:center}}@media screen and (max-width: 600px){.actions--text{display:none}}";export{c as bds_pagination}