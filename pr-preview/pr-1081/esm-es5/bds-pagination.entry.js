var __spreadArray=this&&this.__spreadArray||function(e,t,a){if(a||arguments.length===2)for(var i=0,s=t.length,n;i<s;i++){if(n||!(i in t)){if(!n)n=Array.prototype.slice.call(t,0,i);n[i]=t[i]}}return e.concat(n||Array.prototype.slice.call(t))};import{r as registerInstance,c as createEvent,h,H as Host,g as getElement}from"./index-611fd21e.js";import{g as getScrollParent}from"./position-element-d853cc63.js";var en_US={itemsPerPage:"Items per page",of:"of",items:"items",pages:"pages"};var pt_BR={itemsPerPage:"Itens por p치gina",of:"de",items:"itens",pages:"p치ginas"};var es_MX={itemsPerPage:"Itens por p치gina",of:"de",items:"itens",pages:"p치ginas"};var paginationCss=":host{display:block}:host .actions_select{width:74px}:host(.full_width){width:100%}@media screen and (max-width: 905px){.items_per_page{display:none}.actions{width:100%;-ms-flex-pack:center;justify-content:center}}@media screen and (max-width: 600px){.actions--text{display:none}}";var Pagination=function(){function e(e){var t=this;registerInstance(this,e);this.bdsPaginationChange=createEvent(this,"bdsPaginationChange",7);this.bdsItemsPerPageChange=createEvent(this,"bdsItemsPerPageChange",7);this.pageLoadSize=100;this.handleSelectOpen=function(){setTimeout((function(){t.scrollToSelectedOption()}),100)};this.nextPage=function(e){var a=t.value;if(a<t.pages){e.preventDefault();var i=t.value+1;if(i>t.loadedPageRange.end){t.loadMorePages("next")}t.value=i;t.updateItemRange()}};this.previewPage=function(e){var a=t.value;if(a>1){e.preventDefault();var i=t.value-1;if(i<t.loadedPageRange.start){t.loadMorePages("prev")}t.value=i;t.updateItemRange()}};this.firstPage=function(e){var a=t.value;if(a>1){e.preventDefault();t.loadMorePages("first");t.value=1;t.updateItemRange()}};this.lastPage=function(e){var a=t.value;if(a<t.pages){e.preventDefault();t.loadMorePages("last");t.value=t.pages;t.updateItemRange()}};this.openOptions=function(){t.openSelect=!t.openSelect};this.onBlur=function(){t.openSelect=false};this.handleSelectScroll=function(e){var a=e.target;var i=a.scrollTop,s=a.scrollHeight,n=a.clientHeight;if(i+n>=s-10){if(t.loadedPageRange.end<t.pages){t.loadMorePagesForScroll("next")}}if(i<=10){if(t.loadedPageRange.start>1){t.loadMorePagesForScroll("prev")}}};this.value=this.startedPage;this.itemValue=undefined;this.openSelect=undefined;this.paginationNumbers=[];this.loadedPageRange={start:1,end:100};this.itemsPerPage=undefined;this.intoView=null;this.pages=undefined;this.startedPage=undefined;this.optionsPosition="auto";this.pageCounter=false;this.itemsPage=undefined;this.numberItems=undefined;this.language="pt_BR";this.dtButtonInitial=null;this.dtButtonPrev=null;this.dtSelectNumber=null;this.dtButtonNext=null;this.dtButtonEnd=null}e.prototype.componentWillLoad=function(){this.countPage();this.intoView=getScrollParent(this.el);this.processItemsPage();if(this.pageCounter){this.itemValue=this.itemsPage[0]}this.itemSelected(this.itemValue);this.countItem()};e.prototype.componentDidRender=function(){this.attachScrollListener()};e.prototype.disconnectedCallback=function(){this.removeScrollListener()};e.prototype.attachScrollListener=function(){var e,t;if(this.selectRef){var a=(e=this.selectRef.shadowRoot)===null||e===void 0?void 0:e.querySelector(".select__options");if(a&&!a.hasAttribute("data-scroll-listener-attached")){a.addEventListener("scroll",this.handleSelectScroll);a.setAttribute("data-scroll-listener-attached","true");var i=(t=this.selectRef.shadowRoot)===null||t===void 0?void 0:t.querySelector(".input__container__text");if(i){i.addEventListener("focus",this.handleSelectOpen)}}}};e.prototype.scrollToSelectedOption=function(){var e;if(this.selectRef&&this.value){var t=(e=this.selectRef.shadowRoot)===null||e===void 0?void 0:e.querySelector(".select__options");if(t){var a=t.querySelector('bds-select-option[value="'.concat(this.value,'"]'));if(a){a.scrollIntoView({behavior:"smooth",block:"center"})}}}};e.prototype.removeScrollListener=function(){var e,t;if(this.selectRef){var a=(e=this.selectRef.shadowRoot)===null||e===void 0?void 0:e.querySelector(".select__options");if(a){a.removeEventListener("scroll",this.handleSelectScroll);a.removeAttribute("data-scroll-listener-attached")}var i=(t=this.selectRef.shadowRoot)===null||t===void 0?void 0:t.querySelector(".input__container__text");if(i){i.removeEventListener("focus",this.handleSelectOpen)}}};e.prototype.pagesChanged=function(){this.countPage()};e.prototype.valueChanged=function(){this.bdsPaginationChange.emit(this.value)};e.prototype.processItemsPage=function(){if(typeof this.itemsPage==="string"){try{this.itemsPage=JSON.parse(this.itemsPage.replace(/'/g,'"'))}catch(e){this.itemsPage=[]}}};e.prototype.countItem=function(){if(this.pageCounter){var e=this.numberItems/this.itemValue;this.pages=Math.ceil(e)}};e.prototype.loadPageRange=function(e){if(!this.pages)return;var t=Math.floor(this.pageLoadSize/2);var a=Math.max(1,e-t);var i=Math.min(this.pages,a+this.pageLoadSize-1);if(i-a<this.pageLoadSize-1){a=Math.max(1,i-this.pageLoadSize+1)}this.loadedPageRange={start:a,end:i};this.paginationNumbers=[];for(var s=a;s<=i;s++){this.paginationNumbers.push(s)}};e.prototype.loadMorePages=function(e){if(!this.pages)return;var t=this.loadedPageRange.start;var a=this.loadedPageRange.end;switch(e){case"next":if(a<this.pages){t=a+1;a=Math.min(this.pages,t+this.pageLoadSize-1)}break;case"prev":if(t>1){a=t-1;t=Math.max(1,a-this.pageLoadSize+1)}break;case"first":t=1;a=Math.min(this.pages,this.pageLoadSize);break;case"last":a=this.pages;t=Math.max(1,a-this.pageLoadSize+1);break}this.loadedPageRange={start:t,end:a};this.paginationNumbers=[];for(var i=t;i<=a;i++){this.paginationNumbers.push(i)}};e.prototype.countPage=function(){if(this.paginationNumbers.length!==0){this.paginationNumbers=[]}if(this.paginationNumbers.length===0){var e=Math.min(this.pageLoadSize,this.pages||0);this.loadedPageRange={start:1,end:e};for(var t=this.loadedPageRange.start;t<=this.loadedPageRange.end;t++){this.paginationNumbers.push(t)}if(this.startedPage&&this.startedPage<this.pages){this.value=this.startedPage;if(this.startedPage>this.loadedPageRange.end){this.loadPageRange(this.startedPage)}}else{this.value=this.paginationNumbers[0]}}};e.prototype.optionSelected=function(e){if(e<this.loadedPageRange.start||e>this.loadedPageRange.end){this.loadPageRange(e)}this.value=e;this.openOptions();this.updateItemRange()};e.prototype.loadMorePagesForScroll=function(e){if(!this.pages)return;var t=50;var a=this.loadedPageRange.start;var i=this.loadedPageRange.end;if(e==="next"&&i<this.pages){i=Math.min(this.pages,i+t);this.loadedPageRange={start:a,end:i};for(var s=this.loadedPageRange.end-t+1;s<=i;s++){if(s>0&&!this.paginationNumbers.includes(s)){this.paginationNumbers.push(s)}}}else if(e==="prev"&&a>1){a=Math.max(1,a-t);this.loadedPageRange={start:a,end:i};var n=[];for(var s=a;s<this.loadedPageRange.start+t;s++){if(s>0&&!this.paginationNumbers.includes(s)){n.push(s)}}this.paginationNumbers=__spreadArray(__spreadArray([],n,true),this.paginationNumbers,true)}this.paginationNumbers=__spreadArray([],this.paginationNumbers,true)};e.prototype.itemSelected=function(e){this.itemValue=e;this.itemsPerPage=e;this.openOptions();this.countItem();this.updateItemRange();this.bdsItemsPerPageChange.emit(this.itemsPerPage)};e.prototype.updateItemRange=function(){this.startItem=(this.value-1)*this.itemsPerPage+1;this.endItem=Math.min(this.value*this.itemsPerPage,this.numberItems)};Object.defineProperty(e.prototype,"currentLanguage",{get:function(){switch(this.language){case"en_US":return en_US;case"es_MX":return es_MX;default:return pt_BR}},enumerable:false,configurable:true});e.prototype.render=function(){var e=this;var t;var a=this.currentLanguage;return h(Host,{class:{full_width:this.pageCounter}},h("bds-grid",{"justify-content":"space-between"},this.itemsPerPage&&this.itemsPage&&h("bds-grid",{gap:"1","align-items":"center",class:"items_per_page"},h("bds-typo",{variant:"fs-14"},a.itemsPerPage,":"),h("bds-select",{class:"actions_select",value:this.itemValue,"options-position":this.optionsPosition},(t=this.itemsPage)===null||t===void 0?void 0:t.map((function(t,a){return h("bds-select-option",{key:a,value:t,onClick:function(){return e.itemSelected(t)}},t)}))),h("bds-typo",{variant:"fs-14","no-wrap":"true"},this.startItem,"-",this.endItem," ",a.of," ",this.numberItems)),h("bds-grid",{gap:"1","align-items":"center",class:"actions"},h("bds-button-icon",{onBdsClick:function(t){return e.firstPage(t)},size:"short",variant:"secondary",icon:"arrow-first",dataTest:this.dtButtonInitial}),h("bds-button-icon",{onBdsClick:function(t){return e.previewPage(t)},size:"short",variant:"secondary",icon:"arrow-left",dataTest:this.dtButtonPrev}),h("bds-select",{ref:function(t){return e.selectRef=t},class:"actions_select",value:this.value,"options-position":this.optionsPosition},this.paginationNumbers.map((function(t,a){return h("bds-select-option",{key:a,value:t,onClick:function(){return e.optionSelected(t)}},t)}))),this.pageCounter&&h("bds-typo",{class:"actions--text",variant:"fs-14","no-wrap":"true"},a.of," ",this.pages," ",a.pages),h("bds-button-icon",{onBdsClick:function(t){return e.nextPage(t)},size:"short",variant:"secondary",icon:"arrow-right",dataTest:this.dtButtonNext}),h("bds-button-icon",{onBdsClick:function(t){return e.lastPage(t)},size:"short",variant:"secondary",icon:"arrow-last",dataTest:this.dtButtonEnd}))))};Object.defineProperty(e.prototype,"el",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{pages:["pagesChanged"],startedPage:["pagesChanged"],value:["valueChanged"],itemValue:["itemSelected"]}},enumerable:false,configurable:true});return e}();Pagination.style=paginationCss;export{Pagination as bds_pagination};