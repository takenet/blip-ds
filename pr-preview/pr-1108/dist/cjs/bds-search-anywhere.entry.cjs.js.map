{"version":3,"file":"bds-search-anywhere.entry.cjs.js","sources":["src/components/search-anywhere/search-anywhere.scss?tag=bds-search-anywhere&encapsulation=shadow","src/components/search-anywhere/search-anywhere.tsx"],"sourcesContent":["@use '../../globals/helpers' as *;\n\n:host {\n  display: block;\n  width: 100%;\n}\n\n// Keyboard shortcut hint styling\n.keyboard-shortcut {\n  background-color: $color-surface-2;\n  border-radius: 4px;\n  border: 1px solid $color-border-1;\n\n  bds-typo {\n    color: $color-content-ghost;\n  }\n}\n\n// Modal content wrapper\n.search-modal-content {\n  width: 90%;\n  max-width: 640px;\n  max-height: 70vh;\n}\n\n// Header styling\n.search-modal-header {\n  border-bottom: 1px solid $color-border-1;\n\n  .search-icon {\n    color: $color-content-ghost;\n  }\n\n  bds-input {\n    flex: 1;\n  }\n}\n\n// Results container\n.search-modal-results {\n  flex: 1;\n  overflow-y: auto;\n  max-height: 50vh;\n\n  .search-result-item {\n    cursor: pointer;\n    transition: all 0.2s ease;\n    border: 1px solid transparent;\n\n    &:hover {\n      bds-paper {\n        background-color: $color-surface-1;\n      }\n    }\n\n    &--selected {\n      border-color: $color-primary;\n    }\n\n    .search-result-icon {\n      width: 32px;\n      height: 32px;\n      border-radius: $border-radius;\n      background-color: $color-surface-1;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n\n      bds-icon {\n        color: $color-content-default;\n      }\n    }\n\n    .search-result-content {\n      flex: 1;\n      min-width: 0;\n\n      .search-result-title {\n        color: $color-content-default;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n\n      .search-result-description {\n        color: $color-content-ghost;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n    }\n\n    .search-result-hint {\n      min-width: 80px;\n      text-align: right;\n\n      .keyboard-hint {\n        color: $color-content-ghost;\n      }\n    }\n  }\n}\n\n// Footer styling\n.search-modal-footer {\n  border-top: 1px solid $color-border-1;\n  background-color: $color-surface-1;\n\n  .hint {\n    bds-typo {\n      color: $color-content-ghost;\n    }\n  }\n}\n\n// Scrollbar styling\n.search-modal-results::-webkit-scrollbar {\n  width: 8px;\n}\n\n.search-modal-results::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.search-modal-results::-webkit-scrollbar-thumb {\n  background: $color-border-2;\n  border-radius: 4px;\n}\n\n.search-modal-results::-webkit-scrollbar-thumb:hover {\n  background: $color-border-3;\n}\n\n// Responsive adjustments\n@media (max-width: 768px) {\n  .search-modal-content {\n    width: 95%;\n    max-height: 80vh;\n  }\n\n  .search-result-hint {\n    display: none;\n  }\n}\n","import {\n  Component,\n  h,\n  Host,\n  Prop,\n  State,\n  Event,\n  EventEmitter,\n  Watch,\n  Element,\n  Method,\n} from '@stencil/core';\nimport {\n  SearchAnywhereOption,\n  SearchAnywhereChangeEventDetail,\n  SearchAnywhereSelectEventDetail,\n} from './search-anywhere-interface';\n\n@Component({\n  tag: 'bds-search-anywhere',\n  styleUrl: 'search-anywhere.scss',\n  shadow: true,\n})\nexport class SearchAnywhere {\n  private searchInputComponent?: HTMLBdsInputElement;\n  private modalComponent?: HTMLBdsModalElement;\n  private resultsContainerElement?: HTMLElement;\n\n  @Element() el!: HTMLElement;\n\n  /**\n   * Controls whether the search modal is open\n   */\n  @State() isOpen: boolean = false;\n\n  /**\n   * Current search text\n   */\n  @State() searchText: string = '';\n\n  /**\n   * Current selected index for keyboard navigation\n   */\n  @State() selectedIndex: number = 0;\n\n  /**\n   * Internal filtered options for display\n   */\n  @State() filteredOptions: SearchAnywhereOption[] = [];\n\n  /**\n   * Options to be displayed in the search results.\n   * Can be passed as JSON string or array of SearchAnywhereOption objects.\n   */\n  @Prop() options?: string | SearchAnywhereOption[] = [];\n\n  /**\n   * Placeholder text for the search input (when modal is open)\n   */\n  @Prop() placeholder?: string = 'Search...';\n\n  /**\n   * Placeholder text for the trigger input (before modal opens)\n   */\n  @Prop() triggerPlaceholder?: string = 'Search or press Ctrl+K';\n\n  /**\n   * If true, displays the keyboard shortcut hint on the trigger\n   */\n  @Prop() showShortcut?: boolean = true;\n\n  /**\n   * Maximum number of results to display\n   */\n  @Prop() maxResults?: number = 10;\n\n  /**\n   * Emitted when the search text changes\n   */\n  @Event() bdsSearchChange!: EventEmitter<SearchAnywhereChangeEventDetail>;\n\n  /**\n   * Emitted when an option is selected\n   */\n  @Event() bdsSearchSelect!: EventEmitter<SearchAnywhereSelectEventDetail>;\n\n  /**\n   * Emitted when the modal opens\n   */\n  @Event() bdsSearchOpen!: EventEmitter;\n\n  /**\n   * Emitted when the modal closes\n   */\n  @Event() bdsSearchClose!: EventEmitter;\n\n  /**\n   * Opens the search modal programmatically\n   */\n  @Method()\n  async open() {\n    this.isOpen = true;\n    if (this.modalComponent && typeof this.modalComponent.toggle === 'function') {\n      try {\n        await this.modalComponent.toggle();\n      } catch (e) {\n        // Silently fail if toggle is not available (e.g., in tests)\n      }\n    }\n    this.bdsSearchOpen.emit();\n    \n    // Focus input after modal opens\n    setTimeout(async () => {\n      if (this.searchInputComponent && typeof this.searchInputComponent.setFocus === 'function') {\n        try {\n          await this.searchInputComponent.setFocus();\n        } catch (e) {\n          // Silently fail if setFocus is not available (e.g., in tests)\n        }\n      }\n    }, 100);\n  }\n\n  /**\n   * Closes the search modal programmatically\n   */\n  @Method()\n  async close() {\n    this.isOpen = false;\n    if (this.modalComponent && this.isOpen && typeof this.modalComponent.toggle === 'function') {\n      try {\n        await this.modalComponent.toggle();\n      } catch (e) {\n        // Silently fail if toggle is not available (e.g., in tests)\n      }\n    }\n    this.searchText = '';\n    this.selectedIndex = 0;\n    this.bdsSearchClose.emit();\n  }\n\n  /**\n   * Gets the current open state (for testing)\n   */\n  @Method()\n  async getIsOpen(): Promise<boolean> {\n    return this.isOpen;\n  }\n\n  /**\n   * Gets the current selected index (for testing)\n   */\n  @Method()\n  async getSelectedIndex(): Promise<number> {\n    return this.selectedIndex;\n  }\n\n  /**\n   * Gets the current search text (for testing)\n   */\n  @Method()\n  async getSearchText(): Promise<string> {\n    return this.searchText;\n  }\n\n  componentWillLoad() {\n    this.updateFilteredOptions();\n  }\n\n  componentDidLoad() {\n    // Listen for Ctrl+K globally\n    document.addEventListener('keydown', this.handleGlobalKeydown);\n  }\n\n  disconnectedCallback() {\n    document.removeEventListener('keydown', this.handleGlobalKeydown);\n  }\n\n  @Watch('options')\n  onOptionsChange() {\n    this.updateFilteredOptions();\n  }\n\n  @Watch('searchText')\n  onSearchTextChange() {\n    this.selectedIndex = 0;\n    this.bdsSearchChange.emit({ searchText: this.searchText });\n    this.updateFilteredOptions();\n  }\n\n  @Watch('isOpen')\n  onIsOpenChange() {\n    if (this.isOpen) {\n      // Focus input when modal opens\n      setTimeout(async () => {\n        if (this.searchInputComponent && typeof this.searchInputComponent.setFocus === 'function') {\n          try {\n            await this.searchInputComponent.setFocus();\n          } catch (e) {\n            // Silently fail if setFocus is not available (e.g., in tests)\n          }\n        }\n      }, 100);\n    }\n  }\n\n  private handleGlobalKeydown = (event: KeyboardEvent) => {\n    // Ctrl+K or Cmd+K to open\n    if ((event.ctrlKey || event.metaKey) && event.key === 'k') {\n      event.preventDefault();\n      this.open();\n    }\n  };\n\n  private handleModalKeydown = (event: KeyboardEvent) => {\n    const resultsCount = Math.min(this.filteredOptions.length, this.maxResults);\n\n    switch (event.key) {\n      case 'Escape':\n        event.preventDefault();\n        this.close();\n        break;\n\n      case 'ArrowDown':\n        event.preventDefault();\n        if (resultsCount > 0) {\n          this.selectedIndex = (this.selectedIndex + 1) % resultsCount;\n          this.scrollToSelectedOption();\n        }\n        break;\n\n      case 'ArrowUp':\n        event.preventDefault();\n        if (resultsCount > 0) {\n          this.selectedIndex = (this.selectedIndex - 1 + resultsCount) % resultsCount;\n          this.scrollToSelectedOption();\n        }\n        break;\n\n      case 'Enter':\n        event.preventDefault();\n        if (resultsCount > 0 && this.selectedIndex < resultsCount) {\n          const option = this.filteredOptions[this.selectedIndex];\n          const newTab = event.ctrlKey || event.metaKey;\n          this.selectOption(option, newTab);\n        }\n        break;\n    }\n  };\n\n  private scrollToSelectedOption() {\n    setTimeout(() => {\n      const selectedElement = this.resultsContainerElement?.querySelector(\n        `.search-result-item[data-index=\"${this.selectedIndex}\"]`\n      ) as HTMLElement;\n      \n      if (selectedElement && this.resultsContainerElement) {\n        const containerRect = this.resultsContainerElement.getBoundingClientRect();\n        const itemRect = selectedElement.getBoundingClientRect();\n\n        if (itemRect.bottom > containerRect.bottom) {\n          selectedElement.scrollIntoView({ block: 'end', behavior: 'smooth' });\n        } else if (itemRect.top < containerRect.top) {\n          selectedElement.scrollIntoView({ block: 'start', behavior: 'smooth' });\n        }\n      }\n    }, 0);\n  }\n\n  private updateFilteredOptions() {\n    let parsedOptions: SearchAnywhereOption[] = [];\n\n    if (typeof this.options === 'string') {\n      try {\n        parsedOptions = JSON.parse(this.options);\n      } catch (e) {\n        console.error('Failed to parse options JSON:', e);\n        parsedOptions = [];\n      }\n    } else if (Array.isArray(this.options)) {\n      parsedOptions = this.options;\n    }\n\n    // Filter options based on search text\n    if (this.searchText.trim() === '') {\n      this.filteredOptions = parsedOptions;\n    } else {\n      const searchLower = this.searchText.toLowerCase();\n      this.filteredOptions = parsedOptions.filter((option) => {\n        const titleMatch = option.title?.toLowerCase().includes(searchLower);\n        const descriptionMatch = option.description?.toLowerCase().includes(searchLower);\n        return titleMatch || descriptionMatch;\n      });\n    }\n  }\n\n  private handleInputChange = (event: CustomEvent) => {\n    this.searchText = event.detail.value || '';\n  };\n\n  private handleTriggerClick = () => {\n    this.open();\n  };\n\n  private selectOption = (option: SearchAnywhereOption, newTab: boolean = false) => {\n    this.bdsSearchSelect.emit({ option, newTab });\n\n    // Navigate if URL is provided\n    if (option.url) {\n      if (newTab) {\n        window.open(option.url, '_blank');\n      } else {\n        window.location.href = option.url;\n      }\n    }\n\n    this.close();\n  };\n\n  private handleResultClick = (option: SearchAnywhereOption, event: MouseEvent) => {\n    const newTab = event.ctrlKey || event.metaKey;\n    this.selectOption(option, newTab);\n  };\n\n  private renderTrigger() {\n    return (\n      <bds-paper elevation=\"static\" bg-color=\"surface-1\">\n        <bds-input\n          icon=\"search\"\n          placeholder={this.triggerPlaceholder}\n          readonly={true}\n          dataTest=\"search-anywhere-trigger\"\n          onClick={this.handleTriggerClick}\n        >\n          {this.showShortcut && (\n            <bds-grid slot=\"input-right\" padding=\"x-half\" class=\"keyboard-shortcut\">\n              <bds-typo variant=\"fs-12\" bold=\"regular\">\n                ⌘K\n              </bds-typo>\n            </bds-grid>\n          )}\n        </bds-input>\n      </bds-paper>\n    );\n  }\n\n  private renderResults() {\n    const displayOptions = this.filteredOptions.slice(0, this.maxResults);\n\n    if (displayOptions.length === 0) {\n      return (\n        <bds-grid direction=\"column\" align-items=\"center\" padding=\"4\">\n          <bds-typo variant=\"fs-14\" bold=\"regular\">\n            {this.searchText.trim() === '' ? 'Start typing to search...' : 'No results found'}\n          </bds-typo>\n        </bds-grid>\n      );\n    }\n\n    return displayOptions.map((option, index) => (\n      <bds-paper\n        key={option.value}\n        data-index={index}\n        elevation=\"static\"\n        bg-color={index === this.selectedIndex ? 'surface-2' : 'surface-0'}\n        class={{\n          'search-result-item': true,\n          'search-result-item--selected': index === this.selectedIndex,\n        }}\n        onClick={(event) => this.handleResultClick(option, event)}\n      >\n        <bds-grid direction=\"row\" align-items=\"center\" gap=\"2\" padding=\"2\">\n          {option.icon && (\n            <bds-grid class=\"search-result-icon\">\n              <bds-icon name={option.icon} size=\"medium\" />\n            </bds-grid>\n          )}\n          <bds-grid direction=\"column\" gap=\"half\" class=\"search-result-content\">\n            <bds-typo\n              variant=\"fs-16\"\n              bold={index === this.selectedIndex ? 'bold' : 'regular'}\n              class=\"search-result-title\"\n            >\n              {option.title}\n            </bds-typo>\n            {option.description && (\n              <bds-typo variant=\"fs-12\" class=\"search-result-description\">\n                {option.description}\n              </bds-typo>\n            )}\n          </bds-grid>\n          <bds-grid class=\"search-result-hint\">\n            <bds-typo variant=\"fs-10\" class=\"keyboard-hint\">\n              {index === this.selectedIndex ? '↵ to select' : ''}\n            </bds-typo>\n          </bds-grid>\n        </bds-grid>\n      </bds-paper>\n    ));\n  }\n\n  private renderModal() {\n    return (\n      <bds-modal\n        ref={(el) => (this.modalComponent = el)}\n        open={this.isOpen}\n        close-button={false}\n        outzone-close={true}\n        size=\"dynamic\"\n        onBdsModalChanged={this.handleModalChanged}\n      >\n        <bds-grid direction=\"column\" gap=\"none\" class=\"search-modal-content\" onKeyDown={this.handleModalKeydown}>\n          {/* Search input header */}\n          <bds-grid direction=\"row\" align-items=\"center\" padding=\"3\" gap=\"2\" class=\"search-modal-header\">\n            <bds-icon name=\"search\" size=\"medium\" class=\"search-icon\" />\n            <bds-input\n              ref={(el) => (this.searchInputComponent = el)}\n              type=\"text\"\n              placeholder={this.placeholder}\n              value={this.searchText}\n              onBdsChange={this.handleInputChange}\n              dataTest=\"search-anywhere-input\"\n            />\n          </bds-grid>\n\n          {/* Results area */}\n          <bds-grid \n            direction=\"column\" \n            gap=\"none\" \n            class=\"search-modal-results\" \n            ref={(el) => (this.resultsContainerElement = el)}\n          >\n            {this.renderResults()}\n          </bds-grid>\n\n          {/* Footer with keyboard hints */}\n          <bds-grid direction=\"row\" justify-content=\"center\" gap=\"3\" padding=\"2\" class=\"search-modal-footer\">\n            <bds-grid class=\"hint\">\n              <bds-typo variant=\"fs-10\">↑↓ to navigate</bds-typo>\n            </bds-grid>\n            <bds-grid class=\"hint\">\n              <bds-typo variant=\"fs-10\">↵ to select</bds-typo>\n            </bds-grid>\n            <bds-grid class=\"hint\">\n              <bds-typo variant=\"fs-10\">⌘+↵ for new tab</bds-typo>\n            </bds-grid>\n            <bds-grid class=\"hint\">\n              <bds-typo variant=\"fs-10\">esc to close</bds-typo>\n            </bds-grid>\n          </bds-grid>\n        </bds-grid>\n      </bds-modal>\n    );\n  }\n\n  private handleModalChanged = (event: CustomEvent<{ modalStatus: 'opened' | 'closed' }>) => {\n    if (event.detail.modalStatus === 'closed' && this.isOpen) {\n      this.close();\n    }\n  };\n\n  render() {\n    return (\n      <Host>\n        {this.renderTrigger()}\n        {this.renderModal()}\n      </Host>\n    );\n  }\n}\n"],"names":["h","index","Host"],"mappings":"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"}