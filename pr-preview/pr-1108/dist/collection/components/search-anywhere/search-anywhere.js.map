{"version":3,"file":"search-anywhere.js","sourceRoot":"","sources":["../../../../src/components/search-anywhere/search-anywhere.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  h,\n  Host,\n  Prop,\n  State,\n  Event,\n  EventEmitter,\n  Watch,\n  Element,\n  Method,\n} from '@stencil/core';\nimport {\n  SearchAnywhereOption,\n  SearchAnywhereChangeEventDetail,\n  SearchAnywhereSelectEventDetail,\n} from './search-anywhere-interface';\n\n@Component({\n  tag: 'bds-search-anywhere',\n  styleUrl: 'search-anywhere.scss',\n  shadow: true,\n})\nexport class SearchAnywhere {\n  private searchInputComponent?: HTMLBdsInputElement;\n  private resultsContainerElement?: HTMLElement;\n\n  @Element() el!: HTMLElement;\n\n  /**\n   * Controls whether the search modal is open\n   */\n  @State() isOpen: boolean = false;\n\n  /**\n   * Current search text\n   */\n  @State() searchText: string = '';\n\n  /**\n   * Current selected index for keyboard navigation\n   */\n  @State() selectedIndex: number = 0;\n\n  /**\n   * Internal filtered options for display\n   */\n  @State() filteredOptions: SearchAnywhereOption[] = [];\n\n  /**\n   * Options to be displayed in the search results.\n   * Can be passed as JSON string or array of SearchAnywhereOption objects.\n   */\n  @Prop() options?: string | SearchAnywhereOption[] = [];\n\n  /**\n   * Placeholder text for the search input (when modal is open)\n   */\n  @Prop() placeholder?: string = 'Search...';\n\n  /**\n   * Placeholder text for the trigger input (before modal opens)\n   */\n  @Prop() triggerPlaceholder?: string = 'Search or press Ctrl+K';\n\n  /**\n   * If true, displays the keyboard shortcut hint on the trigger\n   */\n  @Prop() showShortcut?: boolean = true;\n\n  /**\n   * Maximum number of results to display\n   */\n  @Prop() maxResults?: number = 10;\n\n  /**\n   * Emitted when the search text changes\n   */\n  @Event() bdsSearchChange!: EventEmitter<SearchAnywhereChangeEventDetail>;\n\n  /**\n   * Emitted when an option is selected\n   */\n  @Event() bdsSearchSelect!: EventEmitter<SearchAnywhereSelectEventDetail>;\n\n  /**\n   * Emitted when the modal opens\n   */\n  @Event() bdsSearchOpen!: EventEmitter;\n\n  /**\n   * Emitted when the modal closes\n   */\n  @Event() bdsSearchClose!: EventEmitter;\n\n  /**\n   * Opens the search modal programmatically\n   */\n  @Method()\n  async open() {\n    this.isOpen = true;\n    this.bdsSearchOpen.emit();\n    \n    // Focus input after modal opens\n    setTimeout(async () => {\n      if (this.searchInputComponent && typeof this.searchInputComponent.setFocus === 'function') {\n        try {\n          await this.searchInputComponent.setFocus();\n        } catch (e) {\n          // Silently fail if setFocus is not available (e.g., in tests)\n        }\n      }\n    }, 100);\n  }\n\n  /**\n   * Closes the search modal programmatically\n   */\n  @Method()\n  async close() {\n    this.isOpen = false;\n    this.searchText = '';\n    this.selectedIndex = 0;\n    this.bdsSearchClose.emit();\n  }\n\n  /**\n   * Gets the current open state (for testing)\n   */\n  @Method()\n  async getIsOpen(): Promise<boolean> {\n    return this.isOpen;\n  }\n\n  /**\n   * Gets the current selected index (for testing)\n   */\n  @Method()\n  async getSelectedIndex(): Promise<number> {\n    return this.selectedIndex;\n  }\n\n  /**\n   * Gets the current search text (for testing)\n   */\n  @Method()\n  async getSearchText(): Promise<string> {\n    return this.searchText;\n  }\n\n  componentWillLoad() {\n    this.updateFilteredOptions();\n  }\n\n  componentDidLoad() {\n    // Listen for Ctrl+K globally\n    document.addEventListener('keydown', this.handleGlobalKeydown);\n  }\n\n  disconnectedCallback() {\n    document.removeEventListener('keydown', this.handleGlobalKeydown);\n  }\n\n  @Watch('options')\n  onOptionsChange() {\n    this.updateFilteredOptions();\n  }\n\n  @Watch('searchText')\n  onSearchTextChange() {\n    this.selectedIndex = 0;\n    this.bdsSearchChange.emit({ searchText: this.searchText });\n    this.updateFilteredOptions();\n  }\n\n  @Watch('isOpen')\n  onIsOpenChange() {\n    if (this.isOpen) {\n      // Focus input when modal opens\n      setTimeout(async () => {\n        if (this.searchInputComponent && typeof this.searchInputComponent.setFocus === 'function') {\n          try {\n            await this.searchInputComponent.setFocus();\n          } catch (e) {\n            // Silently fail if setFocus is not available (e.g., in tests)\n          }\n        }\n      }, 100);\n    }\n  }\n\n  private handleGlobalKeydown = (event: KeyboardEvent) => {\n    // Ctrl+K or Cmd+K to open\n    if ((event.ctrlKey || event.metaKey) && event.key === 'k') {\n      event.preventDefault();\n      this.open();\n    }\n  };\n\n  private handleModalKeydown = (event: KeyboardEvent) => {\n    const resultsCount = Math.min(this.filteredOptions.length, this.maxResults);\n\n    switch (event.key) {\n      case 'Escape':\n        event.preventDefault();\n        this.close();\n        break;\n\n      case 'ArrowDown':\n        event.preventDefault();\n        if (resultsCount > 0) {\n          this.selectedIndex = (this.selectedIndex + 1) % resultsCount;\n          this.scrollToSelectedOption();\n        }\n        break;\n\n      case 'ArrowUp':\n        event.preventDefault();\n        if (resultsCount > 0) {\n          this.selectedIndex = (this.selectedIndex - 1 + resultsCount) % resultsCount;\n          this.scrollToSelectedOption();\n        }\n        break;\n\n      case 'Enter':\n        event.preventDefault();\n        if (resultsCount > 0 && this.selectedIndex < resultsCount) {\n          const option = this.filteredOptions[this.selectedIndex];\n          const newTab = event.ctrlKey || event.metaKey;\n          this.selectOption(option, newTab);\n        }\n        break;\n    }\n  };\n\n  private scrollToSelectedOption() {\n    setTimeout(() => {\n      const selectedElement = this.resultsContainerElement?.querySelector(\n        `.search-result-item[data-index=\"${this.selectedIndex}\"]`\n      ) as HTMLElement;\n      \n      if (selectedElement && this.resultsContainerElement) {\n        const containerRect = this.resultsContainerElement.getBoundingClientRect();\n        const itemRect = selectedElement.getBoundingClientRect();\n\n        if (itemRect.bottom > containerRect.bottom) {\n          selectedElement.scrollIntoView({ block: 'end', behavior: 'smooth' });\n        } else if (itemRect.top < containerRect.top) {\n          selectedElement.scrollIntoView({ block: 'start', behavior: 'smooth' });\n        }\n      }\n    }, 0);\n  }\n\n  private updateFilteredOptions() {\n    let parsedOptions: SearchAnywhereOption[] = [];\n\n    if (typeof this.options === 'string') {\n      try {\n        parsedOptions = JSON.parse(this.options);\n      } catch (e) {\n        console.error('Failed to parse options JSON:', e);\n        parsedOptions = [];\n      }\n    } else if (Array.isArray(this.options)) {\n      parsedOptions = this.options;\n    }\n\n    // Filter options based on search text\n    if (this.searchText.trim() === '') {\n      this.filteredOptions = parsedOptions;\n    } else {\n      const searchLower = this.searchText.toLowerCase();\n      this.filteredOptions = parsedOptions.filter((option) => {\n        const titleMatch = option.title?.toLowerCase().includes(searchLower);\n        const descriptionMatch = option.description?.toLowerCase().includes(searchLower);\n        return titleMatch || descriptionMatch;\n      });\n    }\n  }\n\n  private handleInputChange = (event: CustomEvent) => {\n    this.searchText = event.detail.value || '';\n  };\n\n  private handleTriggerClick = () => {\n    this.open();\n  };\n\n  private selectOption = (option: SearchAnywhereOption, newTab: boolean = false) => {\n    this.bdsSearchSelect.emit({ option, newTab });\n\n    // Navigate if URL is provided\n    if (option.url) {\n      if (newTab) {\n        window.open(option.url, '_blank');\n      } else {\n        window.location.href = option.url;\n      }\n    }\n\n    this.close();\n  };\n\n  private handleResultClick = (option: SearchAnywhereOption, event: MouseEvent) => {\n    const newTab = event.ctrlKey || event.metaKey;\n    this.selectOption(option, newTab);\n  };\n\n  private renderTrigger() {\n    return (\n      <div class=\"search-trigger\">\n        <bds-input\n          icon=\"search\"\n          placeholder={this.triggerPlaceholder}\n          readonly={true}\n          dataTest=\"search-anywhere-trigger\"\n          onClick={this.handleTriggerClick}\n        >\n          {this.showShortcut && (\n            <div slot=\"input-right\" class=\"keyboard-shortcut\">\n              <bds-typo variant=\"fs-12\" bold=\"regular\">\n                ⌘K\n              </bds-typo>\n            </div>\n          )}\n        </bds-input>\n      </div>\n    );\n  }\n\n  private renderResults() {\n    const displayOptions = this.filteredOptions.slice(0, this.maxResults);\n\n    if (displayOptions.length === 0) {\n      return (\n        <div class=\"no-results\">\n          <bds-typo variant=\"fs-14\" bold=\"regular\">\n            {this.searchText.trim() === '' ? 'Start typing to search...' : 'No results found'}\n          </bds-typo>\n        </div>\n      );\n    }\n\n    return displayOptions.map((option, index) => (\n      <div\n        key={option.value}\n        data-index={index}\n        class={{\n          'search-result-item': true,\n          'search-result-item--selected': index === this.selectedIndex,\n        }}\n        onClick={(event) => this.handleResultClick(option, event)}\n      >\n        {option.icon && (\n          <div class=\"search-result-icon\">\n            <bds-icon name={option.icon} size=\"medium\" />\n          </div>\n        )}\n        <div class=\"search-result-content\">\n          <bds-typo\n            variant=\"fs-16\"\n            bold={index === this.selectedIndex ? 'bold' : 'regular'}\n            class=\"search-result-title\"\n          >\n            {option.title}\n          </bds-typo>\n          {option.description && (\n            <bds-typo variant=\"fs-12\" class=\"search-result-description\">\n              {option.description}\n            </bds-typo>\n          )}\n        </div>\n        <div class=\"search-result-hint\">\n          <bds-typo variant=\"fs-10\" class=\"keyboard-hint\">\n            {index === this.selectedIndex ? '↵ to select' : ''}\n          </bds-typo>\n        </div>\n      </div>\n    ));\n  }\n\n  private renderModal() {\n    if (!this.isOpen) {\n      return null;\n    }\n\n    return (\n      <div class=\"search-modal-overlay\" onClick={(e) => e.target === e.currentTarget && this.close()}>\n        <bds-paper elevation=\"primary\" class=\"search-modal\">\n          <div class=\"search-modal-content\" onKeyDown={this.handleModalKeydown}>\n            {/* Search input header */}\n            <div class=\"search-modal-header\">\n              <div class=\"search-input-wrapper\">\n                <bds-icon name=\"search\" size=\"medium\" class=\"search-icon\" />\n                <bds-input\n                  ref={(el) => (this.searchInputComponent = el)}\n                  type=\"text\"\n                  placeholder={this.placeholder}\n                  value={this.searchText}\n                  onBdsChange={this.handleInputChange}\n                  dataTest=\"search-anywhere-input\"\n                />\n              </div>\n            </div>\n\n            {/* Results area */}\n            <div class=\"search-modal-results\" ref={(el) => (this.resultsContainerElement = el)}>\n              {this.renderResults()}\n            </div>\n\n            {/* Footer with keyboard hints */}\n            <div class=\"search-modal-footer\">\n              <div class=\"keyboard-hints\">\n                <div class=\"hint\">\n                  <bds-typo variant=\"fs-10\">↑↓ to navigate</bds-typo>\n                </div>\n                <div class=\"hint\">\n                  <bds-typo variant=\"fs-10\">↵ to select</bds-typo>\n                </div>\n                <div class=\"hint\">\n                  <bds-typo variant=\"fs-10\">⌘+↵ for new tab</bds-typo>\n                </div>\n                <div class=\"hint\">\n                  <bds-typo variant=\"fs-10\">esc to close</bds-typo>\n                </div>\n              </div>\n            </div>\n          </div>\n        </bds-paper>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <Host>\n        {this.renderTrigger()}\n        {this.renderModal()}\n      </Host>\n    );\n  }\n}\n"]}