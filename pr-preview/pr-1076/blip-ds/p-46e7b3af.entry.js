import{r as t,c as s,h as i,H as h,g as e}from"./p-93b809e8.js";import{g as a}from"./p-1c737f0a.js";const n={itemsPerPage:"Items per page",of:"of",items:"items",pages:"pages"},o={itemsPerPage:"Itens por p치gina",of:"de",items:"itens",pages:"p치ginas"},r={itemsPerPage:"Itens por p치gina",of:"de",items:"itens",pages:"p치ginas"},c=100,d=class{constructor(i){t(this,i),this.bdsPaginationChange=s(this,"bdsPaginationChange",7),this.bdsItemsPerPageChange=s(this,"bdsItemsPerPageChange",7),this.nextPage=t=>{this.value<this.pages&&(t.preventDefault(),this.value=this.value+1,this.updateItemRange())},this.previewPage=t=>{this.value>1&&(t.preventDefault(),this.value=this.value-1,this.updateItemRange())},this.firstPage=t=>{this.value>1&&(t.preventDefault(),this.value=this.paginationNumbers[0],this.updateItemRange())},this.lastPage=t=>{this.value<this.pages&&(t.preventDefault(),this.value=this.pages,this.updateItemRange())},this.openOptions=()=>{this.openSelect=!this.openSelect},this.onBlur=()=>{this.openSelect=!1},this.onSelectScroll=t=>{const s=t.target;s.scrollTop+s.clientHeight>=s.scrollHeight-50&&this.loadMorePages()},this.value=this.startedPage,this.itemValue=void 0,this.openSelect=void 0,this.paginationNumbers=[],this.visiblePageOptions=[],this.loadedPagesCount=c,this.itemsPerPage=void 0,this.intoView=null,this.pages=void 0,this.startedPage=void 0,this.optionsPosition="auto",this.pageCounter=!1,this.itemsPage=void 0,this.numberItems=void 0,this.language="pt_BR",this.dtButtonInitial=null,this.dtButtonPrev=null,this.dtSelectNumber=null,this.dtButtonNext=null,this.dtButtonEnd=null}componentWillLoad(){this.countPage(),this.intoView=a(this.el),this.processItemsPage(),this.pageCounter&&(this.itemValue=this.itemsPage[0]),this.itemSelected(this.itemValue),this.countItem()}componentDidLoad(){this.setupSelectScrollListener()}componentDidUpdate(){this.setupSelectScrollListener()}setupSelectScrollListener(){if(this.selectElement){this.removeSelectScrollListener();const t=this.selectElement.shadowRoot?.querySelector(".select__options");t&&t.addEventListener("scroll",this.onSelectScroll)}}removeSelectScrollListener(){if(this.selectElement){const t=this.selectElement.shadowRoot?.querySelector(".select__options");t&&t.removeEventListener("scroll",this.onSelectScroll)}}disconnectedCallback(){this.removeSelectScrollListener()}pagesChanged(){this.loadedPagesCount=c,this.countPage()}valueChanged(){this.bdsPaginationChange.emit(this.value),this.updateVisiblePageOptions()}processItemsPage(){if("string"==typeof this.itemsPage)try{this.itemsPage=JSON.parse(this.itemsPage.replace(/'/g,'"'))}catch(t){this.itemsPage=[]}}countItem(){this.pageCounter&&(this.pages=Math.ceil(this.numberItems/this.itemValue))}countPage(){if(0!==this.paginationNumbers.length&&(this.paginationNumbers=[]),0===this.paginationNumbers.length){for(let t=1;t<=this.pages;t++)this.paginationNumbers.push(t);this.value=this.startedPage&&this.startedPage<this.pages?this.startedPage:this.paginationNumbers[0]}this.updateVisiblePageOptions()}updateVisiblePageOptions(){if(!this.pages||this.pages<=0)return void(this.visiblePageOptions=[]);if(this.pages<=c)return void(this.visiblePageOptions=[...this.paginationNumbers]);const t=Math.min(this.loadedPagesCount,this.pages);this.visiblePageOptions=[];for(let s=1;s<=t;s++)this.visiblePageOptions.push(s)}optionSelected(t){this.value=t,this.openOptions(),this.updateItemRange()}navigateToPage(t){const s=Math.max(1,Math.min(t,this.pages));s!==this.value&&(this.value=s,this.updateItemRange())}loadMorePages(){if(this.loadedPagesCount<this.pages){const t=Math.min(this.pages,this.loadedPagesCount+c);t>this.loadedPagesCount&&(this.loadedPagesCount=t,this.updateVisiblePageOptions())}}itemSelected(t){this.itemValue=t,this.itemsPerPage=t,this.openOptions(),this.countItem(),this.updateItemRange(),this.bdsItemsPerPageChange.emit(this.itemsPerPage)}updateItemRange(){this.startItem=(this.value-1)*this.itemsPerPage+1,this.endItem=Math.min(this.value*this.itemsPerPage,this.numberItems)}get currentLanguage(){switch(this.language){case"en_US":return n;case"es_MX":return r;default:return o}}render(){const{currentLanguage:t}=this;return i(h,{class:{full_width:this.pageCounter}},i("bds-grid",{"justify-content":"space-between"},this.itemsPerPage&&this.itemsPage&&i("bds-grid",{gap:"1","align-items":"center",class:"items_per_page"},i("bds-typo",{variant:"fs-14"},t.itemsPerPage,":"),i("bds-select",{class:"actions_select",value:this.itemValue,"options-position":this.optionsPosition},this.itemsPage?.map(((t,s)=>i("bds-select-option",{key:s,value:t,onClick:()=>this.itemSelected(t)},t)))),i("bds-typo",{variant:"fs-14","no-wrap":"true"},this.startItem,"-",this.endItem," ",t.of," ",this.numberItems)),i("bds-grid",{gap:"1","align-items":"center",class:"actions"},i("bds-button-icon",{onBdsClick:t=>this.firstPage(t),size:"short",variant:"secondary",icon:"arrow-first",dataTest:this.dtButtonInitial}),i("bds-button-icon",{onBdsClick:t=>this.previewPage(t),size:"short",variant:"secondary",icon:"arrow-left",dataTest:this.dtButtonPrev}),i("bds-select",{ref:t=>this.selectElement=t,class:"actions_select",value:this.value,"options-position":this.optionsPosition},this.visiblePageOptions.map(((t,s)=>i("bds-select-option",{key:s,value:t,onClick:()=>this.optionSelected(t)},t)))),this.pageCounter&&i("bds-typo",{class:"actions--text",variant:"fs-14","no-wrap":"true"},t.of," ",this.pages," ",t.pages),i("bds-button-icon",{onBdsClick:t=>this.nextPage(t),size:"short",variant:"secondary",icon:"arrow-right",dataTest:this.dtButtonNext}),i("bds-button-icon",{onBdsClick:t=>this.lastPage(t),size:"short",variant:"secondary",icon:"arrow-last",dataTest:this.dtButtonEnd}))))}get el(){return e(this)}static get watchers(){return{pages:["pagesChanged"],startedPage:["pagesChanged"],value:["valueChanged"],itemValue:["itemSelected"]}}};d.style=":host{display:block}:host .actions_select{width:74px}:host(.full_width){width:100%}@media screen and (max-width: 905px){.items_per_page{display:none}.actions{width:100%;-ms-flex-pack:center;justify-content:center}}@media screen and (max-width: 600px){.actions--text{display:none}}";export{d as bds_pagination}